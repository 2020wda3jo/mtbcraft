<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mtbcraft.mapper.CommunityMapper">

	<select id="checkClubName" parameterType="String" resultType="Integer">
		SELECT count(*) FROM CLUB WHERE CB_NAME = #{cb_name}
	</select>
	
	<insert id="insertClub" parameterType="com.mtbcraft.dto.Club">
		insert into club(cb_num, cb_manager, cb_name, cb_image) values(SEQ_CLUBNUM.nextval, #{cb_manager}, #{cb_name}, #{cb_image})
	</insert>
	
	<insert id="insertCJ" parameterType="com.mtbcraft.dto.Club_Join">
		insert into club_join(cj_rider, cj_club, cj_join, cj_num) values(#{cj_rider}, SEQ_CLUBNUM.currval, (SYSDATE+9/24), SEQ_JOIN.nextval)
	</insert>
	
	<select id="getMember" parameterType="int" resultType="com.mtbcraft.dto.Club">
		select * from club order by cb_num where cb_num=#{cb_num}
	</select>
	
	<select id="getClub" parameterType="String" resultType="com.mtbcraft.dto.Club">
		select * from club order by cb_num
	</select>	
	
	<insert id="signClub" parameterType="com.mtbcraft.dto.Club_Join">
		insert into club_join(cj_rider, cj_club, cj_join, cj_num) values(#{cj_rider}, #{cj_club}, (SYSDATE+9/24), SEQ_JOIN.nextval)
	</insert>
</mapper>

