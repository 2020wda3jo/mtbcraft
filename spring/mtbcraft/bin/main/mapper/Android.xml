<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mtbcraft.mapper.AndroidMapper">
<select id="insertRecord" resultType="com.mtbcraft.dto.RidingRecord">
		insert into riding_record
		(rr_rider, rr_date, rr_distance, rr_topspeed, rr_avgspeed, rr_high, rr_gpx, rr_open, rr_breaktime, rr_time, rr_area, rr_name, rr_like) 
		values
		(
		#{rr_rider},
		#{rr_date},
		#{rr_distance},
		#{rr_topspeed},
		#{rr_avgspeed},
		#{rr_high},
		#{rr_gpx},
		#{rr_open},
		#{rr_breaktime},
		#{rr_time},
		#{rr_area},
		#{rr_name},
		#{rr_like}
		
		)
	</select>
	
<!-- 안드로이드 로그인 -->
	<select id="LoginProcess" parameterType="hashMap" resultType="com.mtbcraft.dto.AnLogin">
		select r_id, r_pw from rider where r_id = #{r_id} and r_pw = #{r_pw}
	</select>
	
	<select id="readRecord" parameterType="String" resultType="com.mtbcraft.dto.App_RidingRecord">
	select * from riding_record where rr_rider = #{rr_rider}
		
	</select>
	
	<!-- 내 기록 상세보기 -->
	<select id="getRidingRecordDetail" parameterType="String" resultType="com.mtbcraft.dto.RidingRecord">
		select * from riding_record where rr_rider = #{rr_rider} and rr_num = #{rr_num}
	</select>
	
	<!-- 코스보기 -->
	
	<select id="getCourse" parameterType="String" resultType="com.mtbcraft.dto.App_RidingRecord">
		select * from riding_record where rr_open= '1' order by rr_date desc
	</select>
	
	<!-- 코스 상세 보기 -->
	<select id="getCourseItem" parameterType="String" resultType="com.mtbcraft.dto.Course">
		select * from course where c_num = #{c_num}
	</select>
	
	<!-- 코스 스크랩 -->
	<select id="insertScrap" parameterType="com.mtbcraft.dto.Scrap_Status">
		insert into scrap_status
		(ss_rider, ss_course) values (
		#{ss_rider},
		#{ss_course} )
	</select>
	
	<!-- 내 스크립 리스트 -->
	<select id="getScrap" parameterType="String" resultType="com.mtbcraft.dto.Scrap_Status">
		select ss_rider, ss_course, c_distance, c_level, c_area from course INNER JOIN
		scrap_status ON(scrap_status.SS_COURSE = course.C_NUM and scrap_status.SS_RIDER=#{ss_rider} );
	</select>
	
	<!--  내 스크랩 코스 보기 -->
	<select id="getScrapDetail" parameterType="String" resultType="com.mtbcraft.dto.Scrap_Status">
		select * from course where c_num = #{c_num}
	</select>
	
	<!-- 주행기록전체보기 -->
	<select id="getRidingRecordAll" parameterType="String" resultType="com.mtbcraft.dto.RidingRecord">
		select * from riding_record order by rr_num desc
	</select>
	
	<!-- 주행기록전체보기 -->
	<select id="getRidingRecordAllItem" parameterType="String" resultType="com.mtbcraft.dto.RidingRecord">
		select * from riding_record where rr_num = #{rr_num}
	</select>
	
	<select id="getCompetition" resultType="com.mtbcraft.dto.Competition">
		select * from competition order by comp_num
	</select>
	
	<select id="getjoinedComp" parameterType= "String" resultType="String">
		select rr_comp from riding_record where rr_rider = #{rr_rider} and rr_comp is not null
	</select>
	
	<select id="getCompCourse" parameterType="Integer" resultType="String">
		select c_gpx from course where c_num = #{c_num}
	</select>
	
	<select id="getCompClub" parameterType="Integer" resultType="com.mtbcraft.dto.CompClub">
		select cs_club, cs_score, cb_name, cb_image from competition_status, club where cs_club = cb_num and cs_comp = #{cs_comp} order by cs_score desc
	</select>
</mapper>